{"componentChunkName":"component---src-templates-essay-template-js","path":"/essays/react-native-modules/","result":{"data":{"markdownRemark":{"id":"2ad685f1-6394-58f9-8246-6527ffadfe7a","excerpt":"Neste artigo vou mostrar como desenvolver um módulo iOS nativo para React Native. Background Todo mês, em uma sexta-feira, o time da Magrathea sai do ambiente…","html":"<p>Neste artigo vou mostrar como desenvolver um módulo iOS nativo para React Native.</p>\n<h2 id=\"background\" style=\"position:relative;\"><a href=\"#background\" aria-label=\"background permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Background</h2>\n<p>Todo mês, em uma sexta-feira, o time da <a href=\"https://magrathealabs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Magrathea</a> sai do ambiente tradicional da empresa e nos dedicamos a projetos experimentais para descobrir e explorar novas tecnologias, testar metodologias, ferramentas ou até mesmo validar ideias de produtos. Nós chamamos estas sextas-feiras de Hackdays.</p>\n<p>Em um dos Hackdays um dos projetos desenvolvidos foi motivado pela experimentação da tecnologia data over sound (DoS), que permite codificar dados em séries de sons e tons audíveis ou inaudíveis quase-ultra-sônicos para formar um identificador único sonoro. Os dados são codificados em um dispositivo antes da transmissão, e decodificado em um ou mais dispositivos receptores. Qualquer dispositivo que contenha um alto-falante pode emitir esse tipo de sinal, e qualquer dispositivo com um microfone pode receber e decodificar ele.</p>\n<p>Existem diversas aplicações possíveis para esse tipo de tecnologia, como: entretenimento, TV, rádio, games, automação residencial sem o uso de wifi ou bluetooth, sistemas de autenticação para liberação de acesso, sistema de autenticação em dois fatores, pagamento, ticketing, automação industrial, transmissão de informações para um grande número de pessoas em um mesmo ambiente. Se você pensar em beacons e identificadores únicos, talvez DoS faça sentido para o problema que você está tentando resolver. As possibilidades são muitas. Existe inclusive um caso de uso muito interessado da tecnologia em uma usina nuclear. Como ondas de rádio (wifi, bluetooth) podem causar interferências nos equipamentos, a transmissão de dados por áudio o é uma solução interessante.</p>\n<p>A empresa líder de mercado nesta área é a <a href=\"https://www.chirp.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Chirp</a>. A Chirp fornece SDKs em diversas plataformas e linguagens, incluindo <a href=\"http://developers.chirp.io/v2/docs/chirp-for-android\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Android</a>,  <a href=\"http://developers.chirp.io/v2/docs/chirp-and-embedded-devices\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Arduino</a>,  <a href=\"http://developers.chirp.io/v2/docs/chirp-for-ios\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">iOS</a>, <a href=\"http://developers.chirp.io/v2/docs/chirp-for-javascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JavaScript</a> e <a href=\"http://developers.chirp.io/v2/docs/chirp-for-python\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Python</a>. Em toda as plataformas é possível enviar sinais codificados, porém apenas com iOS e Android é possível decodificar.  Escolhemos desenvolver um protótipo de aplicação usando o React Native. Devido a limitação da biblioteca JavaScript resolvemos criar um wrapper para React Native do SDK para o iOS. É aqui que começa de verdade o problema que vou mostrar como solucionar neste post.</p>\n<h2 id=\"react-native\" style=\"position:relative;\"><a href=\"#react-native\" aria-label=\"react native permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React Native</h2>\n<p>O React Native é uma biblioteca de código e um ecossistema de ferramentas que permite que você crie aplicativos usando JavaScript. Ele usa o mesmo princípio de design do React, permitindo que você crie uma interface usando componentes.</p>\n<p>Com o React Native você constrói aplicativos que são indistinguíveis de um aplicativo criado usando Objective-C ou Java. O React Native usa os mesmos blocos de construção de UI fundamentais que os aplicativos nativos iOS e Android, fornecendo interfaces para as APIs nativas.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/430bad1fb382329dd11b903a5a25791d/d38ac/react-native.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACPElEQVQoz12SW2/aQBCF/f9f2pe2qlQ1SpUqNwKVQhOwwA4kDaEFzJ0CBt9CbQcMsbkGvD4dW0mkdqRPsyvNzJ6ZWa7ZbJY6nY7ebreH9XpdaTQaiizLimEYiqqqEYPBQNE0TQGgbLfbiCAIovtut1N835cZYw90PuRarZZDhTAajUDFUavVoOs6lsslKAgvRnGYTCagB9Dr9eA4TpQT5oaE8WR5ziJbr9dhIDNNizAZKWJUlFECoyKM1DBJklilUokoFouMOmHlcpmJosiy2exuOp2GBQWO2rM3mzVc9zHwPBfz+fwV13UjPM+LFIaKqXXQeLBYLECtvyj0V6sV6GGBMy3LHioqVE0PiNBDUbVXwvtgMIzaDY2S/vHP5j97gXMeTNuxDUwsIxhbOsamDse+x2w8wvThPjo7loHlYo7/bUcKZ+4j1JHu17pNyNpQ4H5mY3aJ30evEA+KqX2EyHcJTNo8Zr+zmMtXmHXSaEkFMBKl9+vQujUM1AFOvyeQuRYgFHL+u4OPODk/E7h+ibc7NzFUxaOgfnWMSvYQd6kvaF3HoJaTUErnGLfSKN2KqEoViGfvkU98gCCkIStD0MhweXrif337BvGDA4FTJN6GWSA1mWAhi1gNc3jsZjDvC/CIUKnX5VH/dR19lfzlMS5inzEydGzWG5jmH5xf8P6nvSPEvyUFrlG6scv5JGq36aD6IwXp5hI18tVn6gUe5VwSvU4jmlu42aenLV52sqbtpnJ3/l6cR+IiI/wFstPHLw0gom4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"React Native\"\n        title=\"React Native\"\n        src=\"/static/430bad1fb382329dd11b903a5a25791d/c1b63/react-native.png\"\n        srcset=\"/static/430bad1fb382329dd11b903a5a25791d/5a46d/react-native.png 300w,\n/static/430bad1fb382329dd11b903a5a25791d/0a47e/react-native.png 600w,\n/static/430bad1fb382329dd11b903a5a25791d/c1b63/react-native.png 1200w,\n/static/430bad1fb382329dd11b903a5a25791d/d38ac/react-native.png 1744w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Para você ter uma ideia, este seria um hello world escrito em React Native:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Text<span class=\"token punctuation\">,</span> View <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>View<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Text<span class=\"token operator\">></span>Olá Mundo<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>View<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Apesar do React Native fornecer uma grande quantidade de wrappers para as APIs nativas, existem muitas APIs que ainda não podem ser acessadas, em especial as de terceiros. Mas é fácil criar nossos próprios módulos nativos. Se existe uma funcionalidade nativa que precisamos acessar mas não existe um wrapper pronto em JavaScript, podemos escrever a abstração necessária.</p>\n<h2 id=\"desenvolvendo-o-mólulo\" style=\"position:relative;\"><a href=\"#desenvolvendo-o-m%C3%B3lulo\" aria-label=\"desenvolvendo o mólulo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Desenvolvendo o mólulo</h2>\n<p>Vamos comer adicionando a funcionalidade que queremos usar do SDK Chirp na aplicação iOS. Precisamos adicionar dois arquivos de código no projeto, um header <code class=\"language-text\">.h</code> com a interface e um de implementação <code class=\"language-text\">.m</code>.</p>\n<p>Primeiro, o header <code class=\"language-text\">ChirpNative.h</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"objectivec\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-objectivec line-numbers\"><code class=\"language-objectivec\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">import</span> <span class=\"token expression\"><span class=\"token operator\">&lt;</span>Foundation<span class=\"token operator\">/</span>Foundation<span class=\"token punctuation\">.</span>h<span class=\"token operator\">></span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">import</span> <span class=\"token expression\"><span class=\"token operator\">&lt;</span>React<span class=\"token operator\">/</span>RCTBridgeModule<span class=\"token punctuation\">.</span>h<span class=\"token operator\">></span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">import</span> <span class=\"token expression\"><span class=\"token operator\">&lt;</span>React<span class=\"token operator\">/</span>RCTEventEmitter<span class=\"token punctuation\">.</span>h<span class=\"token operator\">></span></span></span>\n\n<span class=\"token keyword\">@interface</span> NativeChirp <span class=\"token punctuation\">:</span> RCTEventEmitter <span class=\"token operator\">&lt;</span>RCTBridgeModule<span class=\"token operator\">></span>\n<span class=\"token keyword\">@end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>E a implementação do <code class=\"language-text\">ChirpNative.m</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"objectivec\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-objectivec line-numbers\"><code class=\"language-objectivec\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">import</span> <span class=\"token string\">\"ChirpNative.h\"</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">import</span> <span class=\"token string\">\"React/RCTLog.h\"</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">import</span> <span class=\"token expression\"><span class=\"token operator\">&lt;</span>ChirpSDK<span class=\"token operator\">/</span>ChirpSDK<span class=\"token punctuation\">.</span>h<span class=\"token operator\">></span></span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">CHIRP_APP_KEY</span>    <span class=\"token expression\"><span class=\"token operator\">&lt;</span>CHIRP_APP_KEY<span class=\"token operator\">></span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">CHIRP_APP_SECRET</span> <span class=\"token expression\"><span class=\"token operator\">&lt;</span>CHIRP_APP_SECRET<span class=\"token operator\">></span></span></span>\n\n<span class=\"token keyword\">@implementation</span> NativeChirp\n\n<span class=\"token function\">RCT_EXPORT_MODULE</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>NSArray<span class=\"token operator\">&lt;</span>NSString <span class=\"token operator\">*</span><span class=\"token operator\">></span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>supportedEvents\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">@</span><span class=\"token punctuation\">[</span><span class=\"token string\">@\"ChirpReceived\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">RCT_EXPORT_METHOD</span><span class=\"token punctuation\">(</span>configChirp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>ChirpSDK sdk<span class=\"token punctuation\">]</span> setAppKey<span class=\"token punctuation\">:</span>CHIRP_APP_KEY andSecret<span class=\"token punctuation\">:</span>CHIRP_APP_SECRET withCompletion<span class=\"token punctuation\">:</span><span class=\"token operator\">^</span><span class=\"token punctuation\">(</span>BOOL authenticated<span class=\"token punctuation\">,</span> NSError <span class=\"token operator\">*</span> _Nullable error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>authenticated <span class=\"token operator\">||</span> error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">RCTLogInfo</span><span class=\"token punctuation\">(</span><span class=\"token string\">@\"Chirp authentication error : %@\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>ChirpSDK sdk<span class=\"token punctuation\">]</span> setChirpHeardBlock<span class=\"token punctuation\">:</span><span class=\"token operator\">^</span><span class=\"token punctuation\">(</span>Chirp <span class=\"token operator\">*</span>chirp<span class=\"token punctuation\">,</span> NSError <span class=\"token operator\">*</span>error<span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>error <span class=\"token operator\">&amp;&amp;</span> chirp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token punctuation\">[</span>chirp fetchAssociatedDataWithCompletion<span class=\"token punctuation\">:</span><span class=\"token operator\">^</span><span class=\"token punctuation\">(</span>Chirp <span class=\"token operator\">*</span>chirp<span class=\"token punctuation\">,</span> NSError <span class=\"token operator\">*</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         NSDictionary <span class=\"token operator\">*</span>data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>chirp data<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n         NSString <span class=\"token operator\">*</span>text <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">@\"text\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n         <span class=\"token function\">RCTLogInfo</span><span class=\"token punctuation\">(</span><span class=\"token string\">@\"Message: %@\"</span><span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n         <span class=\"token punctuation\">[</span><span class=\"token keyword\">self</span> sendEventWithName<span class=\"token punctuation\">:</span><span class=\"token string\">@\"ChirpReceived\"</span> body<span class=\"token punctuation\">:</span><span class=\"token operator\">@</span><span class=\"token punctuation\">{</span><span class=\"token string\">@\"text\"</span><span class=\"token punctuation\">:</span> text<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n     <span class=\"token punctuation\">}</span>\n     <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token function\">RCTLogInfo</span><span class=\"token punctuation\">(</span><span class=\"token string\">@\"Error: %@\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>ChirpSDK sdk<span class=\"token punctuation\">]</span> start<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">RCT_EXPORT_METHOD</span><span class=\"token punctuation\">(</span>dispatchEvent<span class=\"token punctuation\">:</span><span class=\"token punctuation\">(</span>NSString <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">RCTLogInfo</span><span class=\"token punctuation\">(</span><span class=\"token string\">@\"Dispatch event %@\"</span><span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">[</span><span class=\"token keyword\">self</span> sendEventWithName<span class=\"token punctuation\">:</span><span class=\"token string\">@\"ChirpReceived\"</span> body<span class=\"token punctuation\">:</span><span class=\"token operator\">@</span><span class=\"token punctuation\">{</span><span class=\"token string\">@\"text\"</span><span class=\"token punctuation\">:</span> text<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">@end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Como não passamos nenhum argumento para <code class=\"language-text\">RCT_EXPORT_MODULE</code>, nosso módulo nativo vai ter o nome da nossa classe <code class=\"language-text\">ChirpNative</code>. Com isso, temos o esqueleto de um módulo nativo. Recomendo que você faça tudo isso dentro do XCode para facilitar o processo de build.</p>\n<h2 id=\"usando-o-módulo\" style=\"position:relative;\"><a href=\"#usando-o-m%C3%B3dulo\" aria-label=\"usando o módulo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usando o módulo</h2>\n<p>Usar o módulo nativo é fácil, podemos importar ele em nosso código JavaScript da seguinte forma:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NativeModules <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span>\n\n<span class=\"token keyword\">const</span> ChirpNative <span class=\"token operator\">=</span> NativeModules<span class=\"token punctuation\">.</span>ChirpNative<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Um benefício de construir o módulo dessa forma é que, se quisermos executar códigos nativos diferentes dependendo da plataforma, podemos isolar cada código em seu próprio módulo, ao invés de espalhar verificações de plataforma por diversas partes do aplicativo.</p>\n<p>Para mais detalhes, recorra a <a href=\"http://facebook.github.io/react-native/docs/native-modules-ios.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">documentação de módulos do React Native</a>.</p>","frontmatter":{"abstract":"Desenvolvendo um módulo nativo para iteroperabilidade do React Native com o iOS.","date":"Sep 28, 2018","title":"Desenvolvimento de módulo nativos para React Native","slug":"react-native-modules"}}},"pageContext":{"slug":"/react-native-modules/","previous":{"fileAbsolutePath":"/home/runner/work/alfakini.github.io/alfakini.github.io/content/essays/gerenciando-projetos-python/index.md","fields":{"abstract":"Como usar o Pipenv para gerenciar ambientes de desenvolvimento Python.","authors":"Alan R. Fachini","category":"tutorial","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7UlEQVQozyWSx67CMBBF/f9/gMQagYRgAUKUgCAIEI+a0HtvofcqeCdxFsSx5945c404HA673W40Gq1Wqz/rURTFMIzf7zedTsvlcjQa7XQ6rVZrPB6rqur1emOxWCQSSSaTIhwONxqNUqlUrVaDwaDNZnM4HGhms9lwOLxerywQv9/v2+1GDyx6vR7uLASvwWDAd6FQ6Pf78nixWLBP9eVyYRPf8/kMGjiQPh6P7/e73+8FH/P5fDKZrNfrWq1G6Xa7pZSelLJmBztYKpVKPp8PhULxeBz34/EoeEHPMIFAwOfzaZpGc1gYxO12u1wujqCAnOmcTidjUonX6XQSm80GY5DAYEjEKJvNJlMkEgnS4ne5XCImP2KDkTLqzc7Q4yEDYHIs0EOIKdVQcASdrusImJZ9xqHsfr8LViRJn3Q6Xa/XKc1kMh6PB0hckLXbbTob1oPy8/k8n08CQmiKCYxgAEulUgD7/X673Z7L5bCHkyPEkgI66lG+Xi9TzIubxJWEu90u18NUhEQFfchcBq5aD3dGIlwQSuYVUHEBBE5PzrgtjBgPMTus4SJ55sIUZnJBjNLsTB3fkooFYPLfSltAstksjsVikSNSxILkOJX/AhObtNFwRkLExhTo+ZX56dbDxRIkjFCASTHN/wH60qURuegl7QAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/a63929fa6983c5748cc8a450bb922012/915ed/cover.png","srcSet":"/static/a63929fa6983c5748cc8a450bb922012/12432/cover.png 200w,\n/static/a63929fa6983c5748cc8a450bb922012/6c11f/cover.png 400w,\n/static/a63929fa6983c5748cc8a450bb922012/915ed/cover.png 800w","sizes":"(min-width: 800px) 800px, 100vw"},"sources":[{"srcSet":"/static/a63929fa6983c5748cc8a450bb922012/a1bbf/cover.webp 200w,\n/static/a63929fa6983c5748cc8a450bb922012/e0122/cover.webp 400w,\n/static/a63929fa6983c5748cc8a450bb922012/e62c6/cover.webp 800w","type":"image/webp","sizes":"(min-width: 800px) 800px, 100vw"}]},"width":800,"height":536}}},"date":"2018-05-02T03:01:25.000Z","id":"a52853cf-7589-57f7-81d5-30aae2187022","path":"/essays/gerenciando-projetos-python/","published":true,"slug":"/gerenciando-projetos-python/","tags":["python","programming"],"title":"Gerenciando Projetos Python","type":"essays"}},"next":{"fileAbsolutePath":"/home/runner/work/alfakini.github.io/alfakini.github.io/content/essays/filesystem-events-with-python/index.md","fields":{"abstract":"Recently I had to implement a shell utility to monitor when a file is added in a directory. In this post, I will describe how we used the watchdog Python library to implement the utility and the problems I faced in the way.","authors":"Alan R. Fachini","category":"tutorial","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAABYlAAAWJQFJUiTwAAABEUlEQVQoz+2P6VKEMBCE8frvAWG5AyRswhVAIkXQ3X3/p7JZLct1tfQB/Co1NZXp7kmsZXnZHw673d4sz+BJaxw04zj2w2AWo6dpnmellOd5YRjdOX6YZEGS2a5vQSykrOu6KLaAc57nudiKBFBaHG9xwzjDKE6o4yc28Ygf3d471jjqpmm01shuVQtpmqbQJfHqlmWZpjSDmbEM5HmaMevi8ur6BsUyZhn63hgzrDxWVYU9WIgKsZRSCIEshOI5hLjWZ/DnruumaVJd1ypVlpLzAjrOGPa1rXp3CoES+MGJGdmU0rd4PC6KI0LI5gzXdTeeZ9v2iRkDx3HsI2jIz8D/1fwxIL8BzcO35r/wb155BTofTOuVtAfLAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/a37848a19aa02adf040c6ecc271b734f/915ed/cover.png","srcSet":"/static/a37848a19aa02adf040c6ecc271b734f/12432/cover.png 200w,\n/static/a37848a19aa02adf040c6ecc271b734f/6c11f/cover.png 400w,\n/static/a37848a19aa02adf040c6ecc271b734f/915ed/cover.png 800w","sizes":"(min-width: 800px) 800px, 100vw"},"sources":[{"srcSet":"/static/a37848a19aa02adf040c6ecc271b734f/a1bbf/cover.webp 200w,\n/static/a37848a19aa02adf040c6ecc271b734f/e0122/cover.webp 400w,\n/static/a37848a19aa02adf040c6ecc271b734f/e62c6/cover.webp 800w","type":"image/webp","sizes":"(min-width: 800px) 800px, 100vw"}]},"width":800,"height":536}}},"date":"2018-10-23T16:17:13.000Z","id":"4fe13340-479b-598d-9f1d-8e4357c4fbad","path":"/essays/filesystem-events-with-python/","published":true,"slug":"/filesystem-events-with-python/","tags":["python","programming"],"title":"Filesystem events monitoring with Python","type":"essays"}}}},"staticQueryHashes":["173208366"]}